## 기능 변경

<details>
  <summary>이메일 인증</summary>
  <div markdown="1">
    현재 이메일 인증 관련 데이터는 아래와 같이 DB에 저장한다.

| Column Name | Data Type | Constraints|
|--|--|--|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT |
| userId | BIGINT | NOT NULL, UNIQUE |
| authCode | VARCHAR | NULLABLE|

이메일 인증 코드 부분에 문제점이 존재한다.    

## 문제점

- ###   데이터 유지가 필요한가?   

해당 데이터의 본질은 회원가입을 시점으로 일정 시간이 초과된 이후에는 필요하지 않게 된다. 하지만 현재 코드의 구성으로 보았을 때는 기능을 다 하고 나서 해당 데이터가 영구적으로 제거되는 것이 아닌 그댈 별 다른 조치없으 데이터 베이스에 자리를 차지하고 있다. 

- ###   데이터를 불러오거나 쓰기 작업에 유용한가?    

데이터는 데이터베이스 기반 저장소에 저장이 되고 있다. 이러한 상황에서 인증코드 발행과 기존 코드 변경이 일어나게 되는 작업이 빈번하게 발생하는 경우, 즉 쉽게 설명해서 대용량 트래픽 상황에서 해당 기능에 병목이 발생할 수 있다고 생각이 들었다.   


## 대안

- #### 메모리 캐시 기반 관리 (예: Ehcache, Caffeine)   
  해당 방법은 Application 계층에서 메모리에 인증코드를 저장하며, TTL을 설정하여 자동으로 삭제를 설정할 수 있다.    

  해당 방법의 장점으로는 어플리케이션과 밀접하게 동작이 가능하여 성능적인 면에서 속도가 빠르다는 점이 존재한다.    

  하지만 어플리케이션 재실행 시 데이터 유실이 발생하고, 여러 인스턴스를 사용하는 분산 환경에서는 데이터 일관성을 보장하기 힘들다.   

- #### 외부 서비스를 활용 (예: Firebase, Auth)   
  이는 외부에서 제공하는 인증 서비스를 이용하는 방법이다.    

  외부에서 제공하는 서비스를 이용을 하면 개인적인 기능 구현 측면에는 부담을 줄여준다는 큰 장점이 존재하고, 추가적으로 보안 및 확작성을 보장 할 수 있다는 장점이 존재한다.

  하지만 무엇보다 추기 비용이 증가 한다는 단점이 존재한다.

### Redis 선택   
  Redis는 메모리 기반의 데이터 저장소로 설계되어 있다. 또한 현재 기능 처럼 단기적으로 유요한 데이터를 TTL을 이용하여 자동으로 삭제할 수 있어 적합하다.    
  추가적으로 메모리에서 데이터를 읽고 쓰는 작업을 하기 때문에 데이터베이스를 이용하는 방법과 비교하여 성능이 월등하게 우수하다는 점이 있으며, Redis는 클러스터링과 수평 확장을 지원한다는 점으로 대용량 트래픽이 발생하더라도 안정적인 동작이 가능하다는 점이 있다.

  </div>
</details>